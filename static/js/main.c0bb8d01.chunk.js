(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,r){},105:function(e,t,r){},107:function(e,t,r){},109:function(e,t,r){},113:function(e,t,r){},121:function(e,t,r){"use strict";r.r(t);var n=r(8),a=r(0),o=r.n(a),s=r(43),c=r.n(s),i=r(10),l=r(42),u=r(2),m=r(58),d=r(52),p=r(53),h=r(128),g={INITIAL:"initial",LOADING:"loading",AUTHENTICATED:"authenticated"},f="github_token",E=r(54),y=r(55),v=r(59),w=r(56),N=r(60),b=r(57),O=r.n(b),I=r(11),A=r(12),T=r.n(A);function j(){var e=Object(I.a)(["\n  query {\n    viewer {\n      avatarUrl\n    }\n  }\n"]);return j=function(){return e},e}var M=T()(j()),L=(r(103),function(){return o.a.createElement(i.Query,{query:M},function(e){var t=e.data;return t&&t.viewer?o.a.createElement("img",{className:"Avatar",src:t.viewer.avatarUrl,width:32,height:32,alt:"Avatar"}):o.a.createElement("img",{className:"Avatar",src:"avatar.png",width:32,height:32,alt:"Avatar"})})}),k=r(15),C=r(14),S=r.n(C),P=r(21),R=r.n(P);r(105);S.a.extend(R.a);var $=function(e){var t=e.name,r=e.pushedAt,n=e.url,a=e.descriptionHTML;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,o.a.createElement("a",{href:n},t)),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:a}}),o.a.createElement("p",null,r&&o.a.createElement("span",null,"Updated ",o.a.createElement("span",{title:r},S()(r).fromNow()))))},q=r(18);S.a.extend(R.a);var x=function(e){var t=e.issue;return o.a.createElement("li",{className:"IssueItem"},o.a.createElement("h5",null,o.a.createElement("a",{href:t.url},t.title)),o.a.createElement("p",null,t.author&&o.a.createElement("span",null,"Opened by ",o.a.createElement("a",{href:t.author.url},t.author.login)),t.createdAt&&o.a.createElement("span",{title:t.createdAt}," ",S()(t.createdAt).fromNow())))},H=function(){return o.a.createElement("ol",{className:"RepositoryList"},Array(10).fill("").map(function(e,t){return o.a.createElement("li",{key:t,className:"RepositoryItem RepositoryItem-placeholder"},o.a.createElement("div",{className:"RepositoryItem-placeholder-name"}),o.a.createElement("div",{className:"RepositoryItem-placeholder-text"}),o.a.createElement("div",{className:"RepositoryItem-placeholder-text"}))}))},D=function(e){var t=e.loading,r=e.hasNextPage,n=e.variables,a=e.updateQuery,s=e.fetchMore,c=e.children;return o.a.createElement("div",{className:"FetchMore"},t?o.a.createElement(H,null):o.a.createElement("button",{className:"btn btn-outline btn-block",disabled:!r,onClick:function(){return s({variables:n,updateQuery:a})}},"More ",c))},U=function(e){var t=e.error;return o.a.createElement("div",{className:"ErrorMessage"},o.a.createElement("small",null,t.toString()))};function Q(){var e=Object(I.a)(["\n  query($repositoryOwner: String!, $repositoryName: String!, $cursor: String) {\n    repository(name: $repositoryName, owner: $repositoryOwner) {\n      pullRequests(first: 5, states: [OPEN], after: $cursor) {\n        edges {\n          node {\n            id\n            title\n            url\n            bodyHTML\n            author {\n              login\n              url\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n"]);return Q=function(){return e},e}function _(){var e=Object(I.a)(["\n  query($repositoryOwner: String!, $repositoryName: String!, $cursor: String) {\n    repository(name: $repositoryName, owner: $repositoryOwner) {\n      issues(first: 5, states: [OPEN], after: $cursor) {\n        edges {\n          node {\n            id\n            title\n            url\n            bodyHTML\n            author {\n              login\n              url\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n"]);return _=function(){return e},e}var G=T()(_()),F=T()(Q()),B=(r(107),function(e){return function(t,r){var a=r.fetchMoreResult;return a?Object(n.a)({},t,{repository:Object(n.a)({},t.repository,Object(q.a)({},e,Object(n.a)({},t.repository[e],a.repository[e],{edges:Object(k.a)(t.repository[e].edges).concat(Object(k.a)(a.repository[e].edges))})))}):t}}),z=function(e){var t=e.issues,r=e.loading,n=e.repositoryOwner,a=e.repositoryName,s=e.fetchMore,c=e.entry;return o.a.createElement(o.a.Fragment,null,o.a.createElement("ol",{className:"IssueList"},t.edges.map(function(e){var t=e.node;return o.a.createElement(x,{key:t.id,issue:t,repositoryOwner:n,repositoryName:a})})),o.a.createElement(D,{loading:r,hasNextPage:t.pageInfo.hasNextPage,variables:{cursor:t.pageInfo.endCursor,repositoryOwner:n,repositoryName:a},updateQuery:B(c),fetchMore:s}))},J=function(e){var t=e.repositoryOwner,r=e.repositoryName,n=e.entry;return o.a.createElement("div",{className:"Issues"},o.a.createElement(i.Query,{query:"issues"===n?G:F,variables:{repositoryOwner:t,repositoryName:r},notifyOnNetworkStatusChange:!0},function(e){var a=e.data,s=e.loading,c=e.error,i=e.fetchMore;if(c)return o.a.createElement(U,{error:c});var l=a.repository;return s&&!l?o.a.createElement(H,null):l[n].edges.length?o.a.createElement(z,{issues:l[n],loading:s,repositoryOwner:t,repositoryName:r,fetchMore:i,entry:n}):o.a.createElement("div",{className:"IssueList"},"No issues found.")}))},K=(r(109),function(e,t){var r=t.fetchMoreResult;return r?Object(n.a)({},e,{viewer:Object(n.a)({},e.viewer,{watching:Object(n.a)({},e.viewer.watching,r.viewer.watching,{edges:Object(k.a)(e.viewer.watching.edges).concat(Object(k.a)(r.viewer.watching.edges))})})}):e}),V=function(e){var t=e.loading,r=e.repositories,n=e.fetchMore;return o.a.createElement(o.a.Fragment,null,o.a.createElement("ol",{className:"RepositoryList"},r.edges.map(function(e){var t=e.node;return o.a.createElement("li",{key:t.id,className:"RepositoryItem"},o.a.createElement($,t),o.a.createElement("details",null,o.a.createElement("summary",null,"Issues (",t.issues.totalCount,")"),o.a.createElement(J,{entry:"issues",repositoryName:t.name,repositoryOwner:t.owner.login})),o.a.createElement("details",null,o.a.createElement("summary",null,"Pull Requests (",t.pullRequests.totalCount,")"),o.a.createElement(J,{entry:"pullRequests",repositoryName:t.name,repositoryOwner:t.owner.login})))})),o.a.createElement(D,{loading:t,hasNextPage:r.pageInfo.hasNextPage,variables:{cursor:r.pageInfo.endCursor},updateQuery:K,fetchMore:n}))};function W(){var e=Object(I.a)(["\n  query($cursor: String) {\n    viewer {\n      watching(\n        first: 10\n        after: $cursor\n        orderBy: { field: PUSHED_AT, direction: DESC }\n      ) {\n        edges {\n          node {\n            id\n            name\n            pushedAt\n            url\n            descriptionHTML\n            owner {\n              login\n              url\n            }\n            issues(states: [OPEN]) {\n              totalCount\n            }\n            pullRequests(states: [OPEN]) {\n              totalCount\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n"]);return W=function(){return e},e}var X=T()(W()),Y=function(){return o.a.createElement(i.Query,{query:X,notifyOnNetworkStatusChange:!0},function(e){var t=e.data,r=e.loading,n=e.error,a=e.fetchMore;return n?o.a.createElement(U,{error:n}):r&&!t.viewer?o.a.createElement(H,null):o.a.createElement(V,{loading:r,repositories:t.viewer.watching,fetchMore:a})})},Z=(r(111),r(113),function(e){function t(){var e,r;Object(E.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(v.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(a)))).state={status:g.INITIAL},r}return Object(N.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(window.localStorage.getItem(f))this.setState({status:g.AUTHENTICATED});else{var t=window.location.href.match(/\?code=(.*)/)&&window.location.href.match(/\?code=(.*)/)[1];t&&this.setState({status:g.LOADING},function(){return e.authenticate(t)})}}},{key:"authenticate",value:function(e){var t=this;O.a.get("".concat("https://gitobserve-dev.herokuapp.com/authenticate","/").concat(e)).then(function(e){var r=e.data.token;r&&(window.localStorage.setItem(f,r),t.setState({token:r,status:g.AUTHENTICATED}))}).catch(function(e){return console.error("Error while authenticating: ".concat(e))})}},{key:"render",value:function(){var e=this.state.status;return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"Header"},o.a.createElement("div",{className:"Logo"},"GitObserve"),o.a.createElement("div",{className:"User"},e===g.INITIAL&&o.a.createElement("a",{href:"".concat("https://github.com/login/oauth/authorize","?client_id=").concat("fe9481d19ba52b7459b1","&scope=user%20repo%20read%3Aorg&redirect_uri=").concat("http://localhost:3000")},"Login"),e===g.AUTHENTICATED&&o.a.createElement(L,null))),o.a.createElement("div",{className:"Main"},e===g.LOADING&&o.a.createElement(H,null),e===g.AUTHENTICATED&&o.a.createElement(Y,null)))}}]),t}(a.Component)),ee=new m.a({uri:"https://api.github.com/graphql"}),te=Object(d.a)(function(e,t){var r=t.headers,a=window.localStorage.getItem(f);return{headers:Object(n.a)({},r,{authorization:a?"Bearer ".concat(a):""})}}),re=Object(p.a)(function(e){var t=e.graphQLErrors,r=e.networkError;t&&t.map(function(e){var t=e.message,r=e.locations,n=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(r,", Path: ").concat(n))}),r&&console.log("[Network error]: ".concat(r))}),ne=u.a.from([re,te,ee]),ae=new h.a,oe=new l.a({link:ne,cache:ae});c.a.render(o.a.createElement(i.ApolloProvider,{client:oe},o.a.createElement(Z,null)),document.getElementById("root"))},61:function(e,t,r){e.exports=r(121)}},[[61,2,1]]]);
//# sourceMappingURL=main.c0bb8d01.chunk.js.map