(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,r){},104:function(e,t,r){},106:function(e,t,r){},108:function(e,t,r){},112:function(e,t,r){},120:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(43),s=r.n(o),c=r(9),i=r(42),l=r(2),u=r(57),m=r(52),d=r(127),p=r(53),h=r(54),g=r(58),f=r(55),E=r(59),y=r(56),v=r.n(y),N=r(11),w=r(12),b=r.n(w);function O(){var e=Object(N.a)(["\n  query {\n    viewer {\n      avatarUrl\n    }\n  }\n"]);return O=function(){return e},e}var I=b()(O()),A=(r(102),function(){return a.a.createElement(c.Query,{query:I},function(e){var t=e.data;return t&&t.viewer?a.a.createElement("img",{className:"Avatar",src:t.viewer.avatarUrl,width:32,height:32,alt:"Avatar"}):a.a.createElement("img",{className:"Avatar",src:"avatar.png",width:32,height:32,alt:"Avatar"})})}),T=r(15),M=r(10),j=r(14),L=r.n(j),k=r(21),C=r.n(k);r(104);L.a.extend(C.a);var S=function(e){var t=e.name,r=e.pushedAt,n=e.url,o=e.descriptionHTML;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,a.a.createElement("a",{href:n},t)),a.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}),a.a.createElement("p",null,r&&a.a.createElement("span",null,"Updated ",a.a.createElement("span",{title:r},L()(r).fromNow()))))},P=r(20);L.a.extend(C.a);var R=function(e){var t=e.issue;return a.a.createElement("li",{className:"IssueItem"},a.a.createElement("h5",null,a.a.createElement("a",{href:t.url},t.title)),a.a.createElement("p",null,t.author&&a.a.createElement("span",null,"Opened by ",a.a.createElement("a",{href:t.author.url},t.author.login)),t.createdAt&&a.a.createElement("span",{title:t.createdAt}," ",L()(t.createdAt).fromNow())))},$=function(){return a.a.createElement("ol",{className:"RepositoryList"},Array(10).fill("").map(function(e,t){return a.a.createElement("li",{key:t,className:"RepositoryItem RepositoryItem-placeholder"},a.a.createElement("div",{className:"RepositoryItem-placeholder-name"}),a.a.createElement("div",{className:"RepositoryItem-placeholder-text"}),a.a.createElement("div",{className:"RepositoryItem-placeholder-text"}))}))},q=function(e){var t=e.loading,r=e.hasNextPage,n=e.variables,o=e.updateQuery,s=e.fetchMore,c=e.children;return a.a.createElement("div",{className:"FetchMore"},t?a.a.createElement($,null):a.a.createElement("button",{className:"btn btn-outline btn-block",disabled:!r,onClick:function(){return s({variables:n,updateQuery:o})}},"More ",c))},x=function(e){var t=e.error;return a.a.createElement("div",{className:"ErrorMessage"},a.a.createElement("small",null,t.toString()))};function H(){var e=Object(N.a)(["\n  query($repositoryOwner: String!, $repositoryName: String!, $cursor: String) {\n    repository(name: $repositoryName, owner: $repositoryOwner) {\n      pullRequests(first: 5, states: [OPEN], after: $cursor) {\n        edges {\n          node {\n            id\n            title\n            url\n            bodyHTML\n            author {\n              login\n              url\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n"]);return H=function(){return e},e}function D(){var e=Object(N.a)(["\n  query($repositoryOwner: String!, $repositoryName: String!, $cursor: String) {\n    repository(name: $repositoryName, owner: $repositoryOwner) {\n      issues(first: 5, states: [OPEN], after: $cursor) {\n        edges {\n          node {\n            id\n            title\n            url\n            bodyHTML\n            author {\n              login\n              url\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n"]);return D=function(){return e},e}var U=b()(D()),Q=b()(H()),_=(r(106),function(e){return function(t,r){var n=r.fetchMoreResult;return n?Object(M.a)({},t,{repository:Object(M.a)({},t.repository,Object(P.a)({},e,Object(M.a)({},t.repository[e],n.repository[e],{edges:Object(T.a)(t.repository[e].edges).concat(Object(T.a)(n.repository[e].edges))})))}):t}}),G=function(e){var t=e.issues,r=e.loading,n=e.repositoryOwner,o=e.repositoryName,s=e.fetchMore,c=e.entry;return a.a.createElement(a.a.Fragment,null,a.a.createElement("ol",{className:"IssueList"},t.edges.map(function(e){var t=e.node;return a.a.createElement(R,{key:t.id,issue:t,repositoryOwner:n,repositoryName:o})})),a.a.createElement(q,{loading:r,hasNextPage:t.pageInfo.hasNextPage,variables:{cursor:t.pageInfo.endCursor,repositoryOwner:n,repositoryName:o},updateQuery:_(c),fetchMore:s}))},F=function(e){var t=e.repositoryOwner,r=e.repositoryName,n=e.entry;return a.a.createElement("div",{className:"Issues"},a.a.createElement(c.Query,{query:"issues"===n?U:Q,variables:{repositoryOwner:t,repositoryName:r},notifyOnNetworkStatusChange:!0},function(e){var o=e.data,s=e.loading,c=e.error,i=e.fetchMore;if(c)return a.a.createElement(x,{error:c});var l=o.repository;return s&&!l?a.a.createElement($,null):l[n].edges.length?a.a.createElement(G,{issues:l[n],loading:s,repositoryOwner:t,repositoryName:r,fetchMore:i,entry:n}):a.a.createElement("div",{className:"IssueList"},"No issues found.")}))},B=(r(108),function(e,t){var r=t.fetchMoreResult;return r?Object(M.a)({},e,{viewer:Object(M.a)({},e.viewer,{watching:Object(M.a)({},e.viewer.watching,r.viewer.watching,{edges:Object(T.a)(e.viewer.watching.edges).concat(Object(T.a)(r.viewer.watching.edges))})})}):e}),z=function(e){var t=e.loading,r=e.repositories,n=e.fetchMore;return a.a.createElement(a.a.Fragment,null,a.a.createElement("ol",{className:"RepositoryList"},r.edges.map(function(e){var t=e.node;return a.a.createElement("li",{key:t.id,className:"RepositoryItem"},a.a.createElement(S,t),a.a.createElement("details",null,a.a.createElement("summary",null,"Issues (",t.issues.totalCount,")"),a.a.createElement(F,{entry:"issues",repositoryName:t.name,repositoryOwner:t.owner.login})),a.a.createElement("details",null,a.a.createElement("summary",null,"Pull Requests (",t.pullRequests.totalCount,")"),a.a.createElement(F,{entry:"pullRequests",repositoryName:t.name,repositoryOwner:t.owner.login})))})),a.a.createElement(q,{loading:t,hasNextPage:r.pageInfo.hasNextPage,variables:{cursor:r.pageInfo.endCursor},updateQuery:B,fetchMore:n}))};function J(){var e=Object(N.a)(["\n  query($cursor: String) {\n    viewer {\n      watching(\n        first: 10\n        after: $cursor\n        orderBy: { field: PUSHED_AT, direction: DESC }\n      ) {\n        edges {\n          node {\n            id\n            name\n            pushedAt\n            url\n            descriptionHTML\n            owner {\n              login\n              url\n            }\n            issues(states: [OPEN]) {\n              totalCount\n            }\n            pullRequests(states: [OPEN]) {\n              totalCount\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n"]);return J=function(){return e},e}var K=b()(J()),V=function(){return a.a.createElement(c.Query,{query:K,notifyOnNetworkStatusChange:!0},function(e){var t=e.data,r=e.loading,n=e.error,o=e.fetchMore;return n?a.a.createElement(x,{error:n}):r&&!t.viewer?a.a.createElement($,null):a.a.createElement(z,{loading:r,repositories:t.viewer.watching,fetchMore:o})})},W={INITIAL:"initial",LOADING:"loading",AUTHENTICATED:"authenticated"},X="github_token",Y=(r(110),r(112),function(e){function t(){var e,r;Object(p.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={status:W.INITIAL},r}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.getItem(X))this.setState({status:W.AUTHENTICATED});else{var t=window.location.href.match(/\?code=(.*)/)&&window.location.href.match(/\?code=(.*)/)[1];t&&this.setState({status:W.LOADING},function(){return e.authenticate(t)})}}},{key:"authenticate",value:function(e){var t=this;v.a.get("".concat("https://gitobserve-dev.herokuapp.com/authenticate","/").concat(e)).then(function(e){var r=e.data.token;r&&(localStorage.setItem(X,r),t.setState({token:r,status:W.AUTHENTICATED}))}).catch(function(e){return console.error("Error while authenticating: ".concat(e))})}},{key:"render",value:function(){var e=this.state.status;return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"Header"},a.a.createElement("div",{className:"Logo"},"GitObserve"),a.a.createElement("div",{className:"User"},e===W.INITIAL&&a.a.createElement("a",{href:"".concat("https://github.com/login/oauth/authorize","?client_id=").concat("fe9481d19ba52b7459b1","&scope=user%20repo%20read%3Aorg&redirect_uri=").concat("http://localhost:3000")},"Login"),e===W.AUTHENTICATED&&a.a.createElement(A,null))),a.a.createElement("div",{className:"Main"},e===W.LOADING&&a.a.createElement($,null),e===W.AUTHENTICATED&&a.a.createElement(V,null)))}}]),t}(n.Component)),Z=new u.a({uri:"https://api.github.com/graphql",headers:{authorization:"Bearer 0511b12f3e61d2d844b485dae8d2e125af91b2d3"}}),ee=Object(m.a)(function(e){var t=e.graphQLErrors,r=e.networkError;t&&t.map(function(e){var t=e.message,r=e.locations,n=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(r,", Path: ").concat(n))}),r&&console.log("[Network error]: ".concat(r))}),te=l.a.from([ee,Z]),re=new d.a,ne=new i.a({link:te,cache:re});s.a.render(a.a.createElement(c.ApolloProvider,{client:ne},a.a.createElement(Y,null)),document.getElementById("root"))},60:function(e,t,r){e.exports=r(120)}},[[60,2,1]]]);
//# sourceMappingURL=main.6675d8b4.chunk.js.map