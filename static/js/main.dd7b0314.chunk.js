(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(64)},48:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),s=a.n(o),c=a(2),i=a(3),l=a(5),u=a(4),m=a(6),d=a(12),h=a.n(d),p={INITIAL:"initial",LOADING:"loading",AUTHENTICATED:"authenticated",FINISHED_LOADING:"finished_loading"},f={GITHUB_TOKEN:"github_token"},v=function(e,t){return h.a.post("https://api.github.com/graphql",{query:e},{headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e}).catch(function(e){return console.error("Error while fetching data: ".concat(e))})},E=(a(48),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:null},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem(f.GITHUB_TOKEN);e&&this.getAvatar(e)}},{key:"getAvatar",value:function(e){var t=this;v("\n  query {\n    viewer {\n      avatarUrl\n    }\n  }\n",e).then(function(e){return t.setState({data:e.data.data})})}},{key:"render",value:function(){var e=this.state.data;return e?r.a.createElement("img",{className:"Avatar",src:e.viewer.avatarUrl,width:32,height:32,alt:"Avatar"}):r.a.createElement("img",{className:"Avatar",src:"avatar.png",width:32,height:32,alt:"Avatar"})}}]),t}(n.Component)),g=a(11),y=a(9),N=a(14),I=a(8),O=a.n(I),b=a(10),w=a.n(b);a(52);O.a.extend(w.a);var A=function(e){var t=e.name,a=e.pushedAt,n=e.url,o=e.descriptionHTML;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,r.a.createElement("a",{href:n},t)),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}),r.a.createElement("p",null,a&&r.a.createElement("span",null,"Updated ",r.a.createElement("span",{title:a},O()(a).fromNow()))))},T=a(13);O.a.extend(w.a);var j=function(e){var t=e.url,a=e.title,n=e.author,o=e.createdAt;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,r.a.createElement("a",{href:t},a)),r.a.createElement("p",null,n&&r.a.createElement("span",null,"Opened by ",r.a.createElement("a",{href:n.url},n.login)),o&&r.a.createElement("span",{title:o}," ",O()(o).fromNow())))},D=function(e){var t=e.children,a=e.loading,n=e.hasNextPage,o=e.variables,s=e.fetchMore;return r.a.createElement("div",{className:"FetchMore"},!a&&r.a.createElement("button",{className:"btn btn-outline btn-block",disabled:!n,onClick:function(){return s(o)}},"More ",t))},k=(a(54),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={dots:0},a.onTick=function(){a.setState(function(e){return{dots:(e.dots+1)%4}})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.interval=setInterval(this.onTick,500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.isCenter,t=this.state.dots,a=["Loading"];return e&&a.push("Loading_center"),r.a.createElement("div",{className:a.join(" ")},r.a.createElement("small",null,"Loading ",new Array(t).fill(0).map(function(e){return"."})))}}]),t}(n.Component));a(56);O.a.extend(w.a);var L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={status:p.INITIAL,error:null,data:null},a.fetchIssues=function(e){var t=e.entity,n=e.repositoryOwner,r=e.repositoryName,o=e.issueState,s=e.cursor,c=localStorage.getItem(f.GITHUB_TOKEN);a.setState({status:p.LOADING}),v(function(e){var t=e.entity,a=void 0===t?"issues":t,n=e.repositoryOwner,r=e.repositoryName,o=e.issueState,s=void 0===o?"OPEN":o,c=e.cursor,i=void 0===c?null:c;return'\n    query {\n      repository(owner: "'.concat(n,'", name: "').concat(r,'") {\n        ').concat(a,"(\n          first: 5\n          states: [").concat(s,"]\n          orderBy: { field: CREATED_AT, direction: DESC }\n          after: ").concat(i,"\n        ) {\n          edges {\n            node {\n              id\n              title\n              createdAt\n              url\n              author {\n                login\n                url\n              }\n            }\n          }\n          pageInfo {\n            endCursor\n            hasNextPage\n          }\n        }\n      }\n    }\n  ")}({entity:t,repositoryOwner:n,repositoryName:r,issueState:o,cursor:s}),c).then(function(e){var n=e.data.data;a.setState(function(e){return{data:e.data?{repository:Object(y.a)({},e.data.repository,Object(T.a)({},t,Object(y.a)({},e.data.repository[t],{edges:Object(g.a)(e.data.repository[t].edges).concat(Object(g.a)(n.repository[t].edges)),pageInfo:Object(y.a)({},e.data.repository[t].pageInfo,n.repository[t].pageInfo)})))}:n,status:p.FINISHED_LOADING}})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.entity,a=e.repositoryOwner,n=e.repositoryName;this.fetchIssues({entity:t,repositoryOwner:a,repositoryName:n})}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.error,n=e.data,o=this.props,s=o.entity,c=o.repositoryOwner,i=o.repositoryName;if(!n)return r.a.createElement(k,null);if(a)return r.a.createElement("div",{className:"flash flash-error"},r.a.createElement("button",{onClick:this.fetchIssues,className:"btn btn-sm primary flash-action"},"Retry"),a);var l=n.repository[s].pageInfo,u=Object(N.map)(n.repository[s].edges,"node");return u.length?r.a.createElement("div",{className:"Issues"},r.a.createElement("ol",{className:"IssueList"},u.map(function(e){return r.a.createElement("li",{className:"Issue",key:e.id},r.a.createElement(j,e))})),t===p.LOADING&&r.a.createElement(k,null),r.a.createElement(D,{loading:t===p.LOADING,hasNextPage:l.hasNextPage,variables:{entity:s,repositoryOwner:c,repositoryName:i,cursor:l.endCursor},fetchMore:this.fetchIssues})):r.a.createElement("div",{className:"Issues"},r.a.createElement("p",null,"No content yet."))}}]),t}(n.Component);a(58);var C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={status:p.INITIAL,error:null,data:null},a.fetchData=function(e){var t=e.cursor;a.setState({status:p.LOADING});var n=localStorage.getItem(f.GITHUB_TOKEN);if(!n)return a.setState({error:"GitHub token missing.",status:p.READY});v(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return'\n    query {\n      viewer {\n        watching(first: 10, after: "'.concat(e,'", orderBy: { field: PUSHED_AT, direction: DESC }) {\n          edges {\n            node {\n              id\n              name\n              owner {\n                login\n                url\n              }\n              pushedAt\n              url\n              descriptionHTML\n              issues(states: [OPEN]) {\n                totalCount\n              }\n              pullRequests(states: [OPEN]) {\n                totalCount\n              }\n            }\n          }\n          pageInfo {\n            endCursor\n            hasNextPage\n          }\n        }\n      }\n    }\n  ')}(t),n).then(function(e){var t=e.data.data;a.setState(function(e){return{data:e.data?{viewer:Object(y.a)({},e.data.viewer,{watching:Object(y.a)({},e.data.viewer.watching,{edges:Object(g.a)(e.data.viewer.watching.edges).concat(Object(g.a)(t.viewer.watching.edges)),pageInfo:Object(y.a)({},e.data.viewer.watching.pageInfo,t.viewer.watching.pageInfo)})})}:t,status:p.READY}})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchData({cursor:null})}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.data,n=e.error;if(t!==p.READY&&!a)return r.a.createElement(S,null);if(n)return r.a.createElement("div",{className:"flash flash-error"},r.a.createElement("button",{onClick:this.fetchData,className:"btn btn-sm primary flash-action"},"Retry"),n);var o=a.viewer,s=o.watching,c=o.watching.pageInfo,i=c.hasNextPage,l=c.endCursor,u=Object(N.map)(s.edges,"node");return r.a.createElement(r.a.Fragment,null,r.a.createElement("ol",{className:"RepositoryList"},u.map(function(e){return r.a.createElement("div",{key:e.id,className:"RepositoryItem"},r.a.createElement(A,e),r.a.createElement("details",null,r.a.createElement("summary",null,"Issues (",e.issues.totalCount,")"),r.a.createElement(L,{entity:"issues",repositoryOwner:e.owner.login,repositoryName:e.name})),r.a.createElement("details",null,r.a.createElement("summary",null,"Pull requests (",e.pullRequests.totalCount,")"),r.a.createElement(L,{entity:"pullRequests",repositoryOwner:e.owner.login,repositoryName:e.name})))})),t===p.LOADING&&r.a.createElement(S,null),r.a.createElement(D,{loading:t===p.LOADING,hasNextPage:i,variables:{cursor:l},fetchMore:this.fetchData},"Repositories"))}}]),t}(n.Component),S=function(){return r.a.createElement("ol",{className:"RepositoryList"},Array(10).fill("").map(function(e,t){return r.a.createElement("li",{key:t,className:"RepositoryItem RepositoryItem-placeholder"},r.a.createElement("div",{className:"RepositoryItem-placeholder-name"}),r.a.createElement("div",{className:"RepositoryItem-placeholder-text"}),r.a.createElement("div",{className:"RepositoryItem-placeholder-text"}))}))},G=C,H=(a(60),a(62),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={status:p.INITIAL},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.getItem(f.GITHUB_TOKEN))this.setState({status:p.AUTHENTICATED});else{var t=window.location.href.match(/\?code=(.*)/)&&window.location.href.match(/\?code=(.*)/)[1];t&&this.setState({status:p.LOADING},function(){return e.authenticate(t)})}}},{key:"authenticate",value:function(e){var t=this;h.a.get("".concat("https://gitobserve-dev.herokuapp.com/authenticate","/").concat(e)).then(function(e){var a=e.data.token;a&&(localStorage.setItem(f.GITHUB_TOKEN,a),t.setState({token:a,status:p.AUTHENTICATED}))}).catch(function(e){return console.error("Error while authenticating: ".concat(e))})}},{key:"render",value:function(){var e=this.state.status;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"Header"},r.a.createElement("div",{className:"Logo"},"GitObserve"),r.a.createElement("div",{className:"User"},e===p.INITIAL&&r.a.createElement("a",{href:"".concat("https://github.com/login/oauth/authorize","?client_id=").concat("fe9481d19ba52b7459b1","&scope=user%20repo%20read%3Aorg&redirect_uri=").concat("http://localhost:3000")},"Login"),e===p.AUTHENTICATED&&r.a.createElement(E,null))),r.a.createElement("div",{className:"Main"},e===p.LOADING&&r.a.createElement(k,{isCenter:!0}),e===p.AUTHENTICATED&&r.a.createElement(G,null)))}}]),t}(n.Component));s.a.render(r.a.createElement(H,null),document.getElementById("root"))}},[[24,2,1]]]);
//# sourceMappingURL=main.dd7b0314.chunk.js.map